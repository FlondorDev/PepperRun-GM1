<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>display_reset(4,true)
Debug=false
//menu pausa
pause=0;
keyboard_set_map(ord("W"), vk_up);
keyboard_set_map(ord("A"), vk_left);
keyboard_set_map(ord("S"), vk_down);
keyboard_set_map(ord("D"), vk_right);

gui_width = display_get_gui_width();
gui_height = display_get_gui_height();
gui_margin = 32;

menu_x = x+500;
menu_y = y+500;
menu_x_target = gui_width - gui_margin;
menu_speed = 1; //lower is faster
menu_itemheight = font_get_size(pixelmenu);
menu_committed = -1;
menu_control = true;

menu[2] = "Riprendi";
menu[1] = "Menu iniziale";
menu[0] = "esci ciao";

menu_items = array_length_1d(menu);
menu_cursor = 2;

/// robe camera
x=obj_player.x;
cam = view_camera[0];
follow = obj_player;
view_w_half = view_xview + view_wview * 0.5;
view_h_half = view_yview + view_hview * 0.5;
xTo = xstart;
yTo = ystart;
shake_length = room_speed;
shake_magnitude=0;
shake_remain=0;
buff = 32;

fernando1=340;
fernando2=340+global.timerHP;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//camera che segue il player
if(instance_exists(follow))
{
xTo=follow.x;
yTo=follow.y;

if((follow).object_index == obj_playermorto)
{
x = xTo;
y = yTo;
}
}

//update object position
x += (xTo-x)/25;
y += (yTo-y)/25;


//camera non fuori dai bordi
x=clamp(x,view_w_half+buff,room_width-view_w_half-buff);
y=clamp(y,view_h_half+buff,room_height-view_h_half-buff);

//shake della camera
x += random_range(-shake_remain,+shake_remain);
y += random_range(-shake_remain,+shake_remain);
shake_remain=max(0,shake_remain-((1/shake_length)*shake_magnitude));


//update camera view
view_xview = x-view_w_half;
view_yview = y-view_h_half;


//roba pausa


//controlla menuz
if(menu_control)
{
if(keyboard_check_pressed(vk_up))
{
menu_cursor++;
if(menu_cursor &gt;= menu_items) menu_cursor = 0;
}
if(keyboard_check_pressed(vk_down))
{
menu_cursor--;
if(menu_cursor &lt;0) menu_cursor = menu_items-1;
}

if(keyboard_check_pressed(vk_enter))
{
pause=0;
instance_activate_all();
menu_committed = menu_cursor;
random_range(10,50);
}

}

if(menu_committed != -1)
{
switch(menu_committed)
{
case 2: default:  break;
case 1: game_restart();  break;
case 0: game_end(); break;
}

}

if (gamepad_button_check_pressed(0,gp_select))
{
global.Hp=3
global.preso=0;
global.soldi=0
global.timerHP=400
room_restart();
room_restart();
audio_stop_all();
game_restart();
/*instance_destroy(room);
room_restart()
global.Hp=3
global.preso=0;
global.soldi=0;
room_goto(menuliveli);*/
}
if (gamepad_button_check_pressed(0,gp_start))
{
if ((instance_exists(obj_player)) &amp;&amp; !pause){
  pause = 1;
  instance_deactivate_all(true);
} else {
  pause = 0; 
  instance_activate_all();
}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="5" enumb="82">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.Hp=3
global.preso=0;
global.soldi=0
global.timerHP=400
room_restart();
room_restart();
audio_stop_all();
game_restart();
/*instance_destroy(room);
room_restart()
global.Hp=3
global.preso=0;
global.soldi=0;
room_goto(menuliveli);*/
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="5" enumb="27">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if ((instance_exists(obj_player)) &amp;&amp; !pause){
  pause = 1;
  instance_deactivate_all(true);
} else {
  pause = 0; 
  instance_activate_all();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="76">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(instance_exists(obj_player))
x=obj_player.x;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_set_font(pixelcoso);
if(!pause){
draw_set_halign(fa_left);
draw_set_colour(c_white);
draw_set_font(pixelcoso);

if(Debug==true)
{
draw_text(50, 40, "FPS = " + string(fps_real));
if(instance_exists(obj_player))
{
draw_text(50, 100, "X = " + string(obj_player.x) + "   Y = " + string(obj_player.y));
    draw_text(50, 180, "timerHP = " + string(global.timerHP));
draw_text(50, 200, "wsp = " + string(obj_player.wsp));
}
//draw_text(50, 120, "Arma = " + string(global.arma));

draw_text(50, 140, "posx = " + string(global.playerx));
draw_text(50, 160, "posy = " + string(global.playery));
draw_text(50, 240, "room = " + string(room));
}
draw_text(50, 100, "Score = " + string(global.soldi));

if(room==Room1) 
{
draw_text(50, 150, "Death =  " + string(global.morty1)) 
    draw_text(50,50,"Highscore = " + string(global.scorelv1))
}
if(room==Room2) 
{
draw_text(50, 150, "Death = " + string(global.morty2)) 
draw_text(50,50,"Highscore = " + string(global.scorelv2))
}
if(room==Room3) 
{
draw_text(50, 150, "Death = " + string(global.morty3)) 
draw_text(50,50,"Highscore = " + string(global.scorelv3))
}
if(room==Room4) 
{
draw_text(50, 150, "Death = " + string(global.morty4))
draw_text(50,50,"Highscore = " + string(global.scorelv4))
}
if(room==Room5) 
{
draw_text(50, 150, "Death = " + string(global.morty5))
draw_text(50,50,"Highscore = " + string(global.scorelv5))
}
if(room==Room6) 
{
draw_text(50, 150, "Death = " + string(global.morty6)) 
draw_text(50,50,"Highscore = " + string(global.scorelv6))
}
if(room==Room7) 
{
draw_text(50, 150, "Death = " + string(global.morty7))
draw_text(50,50,"Highscore = " + string(global.scorelv7))
}


//usa questa stringa per verificare le variabili in game

//non cancellarla


draw_button(fernando1,55,fernando2,65,true)
fernando2=340+global.timerHP;

// prima arma

draw_set_colour(c_white);
if(global.arma==1 &amp;&amp; global.UnlockedW1==1)
{
draw_text(1120, 700, "Ammo = " + string(global.Weapon1current_ammo) + "|" + string(global.Weapon1ammo_reserve));
}
else if(global.arma==2 &amp;&amp; global.UnlockedW2==1) draw_text(1120, 700, "Ammo = " + string(global.Weapon2current_ammo) + "|" + string(global.Weapon2ammo_reserve));
}

if(pause)
{
/// @description crea il menu

draw_set_font(pixelcoso);
draw_set_halign(fa_right);
draw_set_valign(fa_bottom);

for (var i = 0; i &lt; menu_items; i++)
{
draw_set_halign(fa_center);
var offset = 2;
var txt = menu[i];
if(menu_cursor == i)
{
txt = string_insert("-&gt; ",txt,0);
var col = c_white;
}
else
{
var col = c_gray
}
var xx = menu_x;
var yy = menu_y - (menu_itemheight * (i * 1.5));
draw_set_color(c_black);
draw_text(xx-offset,yy,txt);
draw_text(xx+offset,yy,txt);
draw_text(xx,yy-offset,txt);
draw_text(xx,yy+offset,txt);
draw_set_color(col);
draw_text(xx,yy,txt);
}}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// @description menu di pausa
// You can write your code in this editor
if(pause)
{
	draw_set_color(c_black);
	draw_rectangle(0,0,room_width,room_height,0);
	draw_set_halign(fa_center);
	draw_set_font(pixelmenu);
	draw_set_color(c_yellow);
	draw_text(x,y,"Pause");
	draw_set_color(c_black);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
